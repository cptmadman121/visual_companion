<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="TrayVisionPrompt.Avalonia.Views.SettingsView">
  <Grid RowDefinitions="Auto,*,Auto">
    <TextBlock Grid.Row="0" Classes="h1" Text="Settings" Margin="8"/>
    <TabControl Grid.Row="1" Margin="8">
      <TabItem Header="General">
        <ScrollViewer>
          <StackPanel Spacing="8">
            <TextBlock Classes="caption" Text="Capture Hotkey"/>
            <TextBox Watermark="Ctrl+Shift+S" Text="{Binding Hotkey, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Proofread Hotkey"/>
            <TextBox Watermark="Ctrl+Shift+P" Text="{Binding ProofreadHotkey, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Translate Hotkey"/>
            <TextBox Watermark="Ctrl+Shift+T" Text="{Binding TranslateHotkey, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Language"/>
            <ComboBox ItemsSource="{Binding Languages}" SelectedItem="{Binding Language, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Icon"/>
            <ComboBox ItemsSource="{Binding AvailableIcons}" SelectedItem="{Binding SelectedIcon, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Backend"/>
            <ComboBox SelectedItem="{Binding Backend, Mode=TwoWay}">
              <ComboBoxItem>ollama</ComboBoxItem>
              <ComboBoxItem>vllm</ComboBoxItem>
              <ComboBoxItem>llamacpp</ComboBoxItem>
            </ComboBox>
            <TextBlock Classes="caption" Text="Endpoint"/>
            <TextBox Text="{Binding Endpoint, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Model"/>
            <TextBox Text="{Binding Model, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Timeout (ms)"/>
            <TextBox Text="{Binding TimeoutMs, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Max Tokens"/>
            <TextBox Text="{Binding MaxTokens, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Temperature"/>
            <TextBox Text="{Binding Temperature, Mode=TwoWay}"/>
            <CheckBox Content="Use Vision" IsChecked="{Binding UseVision, Mode=TwoWay}" />
            <CheckBox Content="OCR Fallback" IsChecked="{Binding UseOcrFallback, Mode=TwoWay}" />
            <TextBlock Classes="caption" Text="Proxy"/>
            <TextBox Text="{Binding Proxy, Mode=TwoWay}"/>
          </StackPanel>
        </ScrollViewer>
      </TabItem>
      <TabItem Header="Prompts">
        <ScrollViewer>
          <StackPanel Spacing="8">
            <TextBlock Classes="caption" Text="Default Capture Instruction"/>
            <TextBox AcceptsReturn="True" TextWrapping="Wrap" Height="80" Text="{Binding CaptureInstruction, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Proofread Prompt"/>
            <TextBox AcceptsReturn="True" TextWrapping="Wrap" Height="120" Text="{Binding ProofreadPrompt, Mode=TwoWay}"/>
            <TextBlock Classes="caption" Text="Translate Prompt"/>
            <TextBox AcceptsReturn="True" TextWrapping="Wrap" Height="120" Text="{Binding TranslatePrompt, Mode=TwoWay}"/>
          </StackPanel>
        </ScrollViewer>
      </TabItem>
    </TabControl>
    <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right" Margin="8,0,8,8">
      <Button Content="Test Backend" Click="OnTest"/>
      <Button Content="Cancel" Click="OnCancel"/>
      <Button Classes="primary" Content="Save" Click="OnSave"/>
    </StackPanel>
  </Grid>
</UserControl>
